import{d as V,r as w,k as $,j as p,ak as j,A as r,x as i,y as f,B as o,N as l,H as n,F as v,at as B,O as T,G as x,a8 as y,C as g,I as D,a0 as S,aa as U,P as F,J as I,K as P,au as z}from"./frappe-ui-C1kNCtW7.js";import{_ as A}from"./CourseCard-DImQuf8o.js";import{u as E,S as R,P as q}from"./index-z00NSwZC.js";import"./UserAvatar-DAzeZQK4.js";import"./CourseInstructors-DXvXgK2q.js";import"./ProgressBar-BCrvj0gH.js";const G={key:0},H={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-3 py-2.5 sm:px-5"},J={class:"flex space-x-2 justify-end"},K={class:"w-36"},M={class:""},O={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 my-5 mx-5"},Q={key:1,class:"grid flex-1 place-items-center text-xl font-medium text-gray-500"},W={class:"flex flex-col items-center justify-center mt-4"},re={__name:"Courses",setup(X){var C;const u=V("$user"),_=w(""),c=$({url:"lms.lms.utils.get_courses",cache:["courses",(C=u.data)==null?void 0:C.email],auto:!0}),b=w(0);let h;const N=p(()=>{var t,s;return h=[],d("Live"),d("New"),d("Upcoming"),u.data&&(d("Enrolled"),(u.data.is_moderator||u.data.is_instructor||(s=(t=c.data)==null?void 0:t.created)!=null&&s.length)&&d("Created"),u.data.is_moderator&&d("Under Review")),h}),d=t=>{let s=k(t.toLowerCase().split(" ").join("_"));h.push({label:t,courses:p(()=>s),count:p(()=>s.length)})},k=t=>{if(_.value){let s=_.value.toLowerCase();return c.data[t].filter(m=>m.title.toLowerCase().includes(s)||m.short_introduction.toLowerCase().includes(s)||m.tags.filter(e=>e.toLowerCase().includes(s)).length)}return c.data[t]},L=p(()=>({title:"Courses",description:"All Courses divided by categories"}));return E(L),(t,s)=>{const m=j("router-link");return r(c).data?(i(),f("div",G,[o("header",H,[l(r(B),{class:"h-7",items:[{label:t.__("Courses"),route:{name:"Courses"}}]},null,8,["items"]),o("div",J,[o("div",K,[l(r(T),{type:"text",placeholder:"Search",modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=e=>_.value=e),onInput:s[1]||(s[1]=e=>r(c).reload())},{prefix:n(()=>[l(r(R),{class:"w-4 h-4 stroke-1.5 text-gray-600",name:"search"})]),_:1},8,["modelValue"])]),l(m,{to:{name:"CourseForm",params:{courseName:"new"}}},{default:n(()=>{var e;return[(e=r(u).data)!=null&&e.is_moderator?(i(),x(r(D),{key:0,variant:"solid"},{prefix:n(()=>[l(r(q),{class:"h-4 w-4"})]),default:n(()=>[y(" "+g(t.__("New Course")),1)]),_:1})):v("",!0)]}),_:1})])]),o("div",M,[l(r(z),{modelValue:b.value,"onUpdate:modelValue":s[2]||(s[2]=e=>b.value=e),tablistClass:"overflow-x-visible flex-wrap !gap-3 md:flex-nowrap",tabs:N.value},{tab:n(({tab:e,selected:a})=>[o("div",null,[o("button",{class:S(["group -mb-px flex items-center gap-2 overflow-hidden border-b border-transparent py-2.5 text-base text-gray-600 duration-300 ease-in-out hover:border-gray-400 hover:text-gray-900",{"text-gray-900":a}])},[e.icon?(i(),x(U(e.icon),{key:0,class:"h-5"})):v("",!0),y(" "+g(t.__(e.label))+" ",1),l(r(F),{theme:"gray"},{default:n(()=>[y(g(e.count),1)]),_:2},1024)],2)])]),default:n(({tab:e})=>[e.courses&&e.courses.value.length?(i(),f("div",O,[(i(!0),f(I,null,P(e.courses.value,a=>(i(),x(m,{to:a.membership&&a.current_lesson?{name:"Lesson",params:{courseName:a.name,chapterNumber:a.current_lesson.split("-")[0],lessonNumber:a.current_lesson.split("-")[1]}}:a.membership?{name:"Lesson",params:{courseName:a.name,chapterNumber:1,lessonNumber:1}}:{name:"CourseDetail",params:{courseName:a.name}}},{default:n(()=>[l(A,{course:a},null,8,["course"])]),_:2},1032,["to"]))),256))])):(i(),f("div",Q,[o("div",W,[o("div",null,g(t.__("No {0} courses found").format(e.label.toLowerCase())),1)])]))]),_:1},8,["modelValue","tabs"])])])):v("",!0)}}};export{re as default};
//# sourceMappingURL=Courses-BNGnTiSO.js.map
